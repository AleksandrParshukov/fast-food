{"version":3,"file":"randomizer.min.js","sources":["randomizer.js"],"sourcesContent":["const MIN_TEAM_COUNT = 4,\r\n\tMAX_TEAM_COUNT = 20,\r\n\tMIN_STEPS = 40,\r\n\tMAX_STEPS = 50,\r\n\tBASE_INTERVAL = 2000;\r\n\r\n$('document').ready(function () {\r\n\tconst $randomizer_btn = $('.randomizer-btn');\r\n\r\n\tlet max_count = (count = 0);\r\n\r\n\t$randomizer_btn.on('click', function () {\r\n\t\tmax_count = count = getRandomIntInclusive(MIN_STEPS, MAX_STEPS);\r\n\r\n\t\t$('.final').removeClass('final');\r\n\r\n\t\trandomize();\r\n\t});\r\n\r\n\tfunction slide_next() {\r\n\t\tconst $prev = $('.prev'),\r\n\t\t\t$active = $('.active'),\r\n\t\t\t$next = $('.next'),\r\n\t\t\t$back = $('.back');\r\n\r\n\t\t$prev.removeClass('prev').addClass('back');\r\n\t\t$active.removeClass('active').addClass('prev');\r\n\t\t$next.removeClass('next').addClass('active');\r\n\t\t$back.removeClass('back').addClass('next');\r\n\t}\r\n\r\n\tfunction randomize() {\r\n\t\tlet random_num = getRandomIntInclusive(MIN_TEAM_COUNT, MAX_TEAM_COUNT);\r\n\r\n\t\twhile (random_num == $('.prev').text() || random_num == $('.active').text() || random_num == $('.next').text()) {\r\n\t\t\trandom_num = getRandomIntInclusive(MIN_TEAM_COUNT, MAX_TEAM_COUNT);\r\n\t\t}\r\n\r\n\t\t$('.back').text(random_num);\r\n\r\n\t\tconst cur_step = max_count - count;\r\n\r\n\t\tif (cur_step <= 5) {\r\n\t\t\tinterval = Math.ceil(Math.sqrt((Math.pow(BASE_INTERVAL, 2) / count) * (6 - cur_step)));\r\n\t\t} else if (cur_step <= 30) {\r\n\t\t\tinterval = Math.pow(cur_step - 18, 2) + 150;\r\n\t\t} else {\r\n\t\t\tinterval = Math.ceil(Math.sqrt(Math.pow(BASE_INTERVAL, 2) / count));\r\n\t\t}\r\n\r\n\t\tconsole.log(interval);\r\n\r\n\t\t$('.randomizer').css('transition-duration', `${interval * 0.9}ms`);\r\n\r\n\t\tslide_next();\r\n\r\n\t\tif (count > 1) {\r\n\t\t\tsetTimeout(randomize, interval); // Не используем интервал, ибо равные промежтки получить сложно (см. https://habrahabr.ru/post/138062/)\r\n\t\t\tcount--;\r\n\t\t} else {\r\n\t\t\t$('.active').addClass('final');\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getRandomIntInclusive(min, max) {\r\n\t\tmin = Math.ceil(min);\r\n\t\tmax = Math.floor(max);\r\n\t\treturn Math.floor(Math.random() * (max - min + 1)) + min; //Максимум и минимум включаются\r\n\t}\r\n});\r\n"],"names":["MIN_TEAM_COUNT","MAX_TEAM_COUNT","MIN_STEPS","MAX_STEPS","BASE_INTERVAL","$","ready","$randomizer_btn","let","max_count","count","randomize","random_num","getRandomIntInclusive","text","cur_step","interval","Math","ceil","sqrt","pow","console","log","css","$prev","$active","$next","$back","removeClass","addClass","slide_next","setTimeout","min","max","floor","random","on"],"mappings":"AAAA,MAAMA,eAAiB,EACtBC,eAAiB,GACjBC,UAAY,GACZC,UAAY,GACZC,cAAgB,IAEjBC,EAAE,YAAYC,MAAM,WACnB,MAAMC,EAAkBF,EAAE,mBAE1BG,IAAIC,EAAaC,MAAQ,EAsBzB,SAASC,IACRH,IAAII,EAAaC,EAAsBb,eAAgBC,gBAEvD,KAAOW,GAAcP,EAAE,SAASS,QAAUF,GAAcP,EAAE,WAAWS,QAAUF,GAAcP,EAAE,SAASS,QACvGF,EAAaC,EAAsBb,eAAgBC,gBAGpDI,EAAE,SAASS,KAAKF,GAEhB,IAAMG,EAAWN,EAAYC,MAG5BM,SADGD,GAAY,EACJE,KAAKC,KAAKD,KAAKE,KAAMF,KAAKG,IAAIhB,cAAe,GAAKM,OAAU,EAAIK,KACjEA,GAAY,GACXE,KAAKG,IAAIL,EAAW,GAAI,GAAK,IAE7BE,KAAKC,KAAKD,KAAKE,KAAKF,KAAKG,IAAIhB,cAAe,GAAKM,QAG7DW,QAAQC,IAAIN,UAEZX,EAAE,eAAekB,IAAI,sBAAqC,GAAXP,SAAH,MAjC7C,WACC,MAAMQ,EAAQnB,EAAE,SACfoB,EAAUpB,EAAE,WACZqB,EAAQrB,EAAE,SACVsB,EAAQtB,EAAE,SAEXmB,EAAMI,YAAY,QAAQC,SAAS,QACnCJ,EAAQG,YAAY,UAAUC,SAAS,QACvCH,EAAME,YAAY,QAAQC,SAAS,UACnCF,EAAMC,YAAY,QAAQC,SAAS,QA0BnCC,GAEY,EAARpB,OACHqB,WAAWpB,EAAWK,UACtBN,SAEAL,EAAE,WAAWwB,SAAS,SAIxB,SAAShB,EAAsBmB,EAAKC,GAGnC,OAFAD,EAAMf,KAAKC,KAAKc,GAChBC,EAAMhB,KAAKiB,MAAMD,GACVhB,KAAKiB,MAAMjB,KAAKkB,UAAYF,EAAMD,EAAM,IAAMA,EAxDtDzB,EAAgB6B,GAAG,QAAS,WAC3B3B,EAAYC,MAAQG,EAAsBX,UAAWC,WAErDE,EAAE,UAAUuB,YAAY,SAExBjB"}